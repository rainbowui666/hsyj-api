{
    "version": 3,
    "sources": [
        "../../../src/api/controller/student.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "addEditAction",
        "studentname",
        "post",
        "wxchat",
        "tel",
        "stuNo",
        "idcard",
        "birthday",
        "schoolid",
        "photo",
        "shstate",
        "pwd",
        "wxopenid",
        "nickname",
        "sex",
        "id",
        "get",
        "param",
        "studentName",
        "IDCard",
        "think",
        "isEmpty",
        "model",
        "insertid",
        "add",
        "success",
        "where",
        "studentID",
        "update",
        "getStudentListAction",
        "pageindex",
        "pagesize",
        "stuno",
        "stunocondition",
        "studentnamecondition",
        "telcondition",
        "wxcondition",
        "start",
        "data",
        "query",
        "deleteAction"
    ],
    "mappings": "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",
    "file": "../../../src/api/controller/student.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n\nmodule.exports = class extends Base {\n    async addEditAction() {\n        const studentname = this.post('studentname');\n        const wxchat = this.post('wxchat');\n        const tel = this.post('tel') || '';\n        const stuNo = this.post('stuno') || '';\n        const idcard = this.post('idcard') || '';\n        const birthday= this.post('birthday');\n        const schoolid = this.post('schoolid');\n        const photo = this.post('photo');\n        const shstate = this.post('shstate');\n        const pwd = this.post('pwd');\n        const wxopenid = this.post('wxopenid');\n        const nickname = this.post('nickname');\n        const sex = this.post('sex');\n        const id = this.get('id');\n\n        let param = {\n            studentName:studentname,\n            wxchat: wxchat,\n            tel,\n            stuNo,\n            IDCard:idcard,\n            birthday,\n            schoolid,\n            photo,\n            shstate,\n            pwd,\n            wxopenid,\n            nickname,\n            sex\n        }; \n\n        if (think.isEmpty(id)) {\n            let model = this.model('student');\n            const insertid = await model.add(param);\n            return this.success('添加成功')\n        } else {\n            await this.model('student').where({studentID:id}).update(param);\n            return this.success('修改成功');\n        }\n    }\n\n    async getStudentListAction() {\n        const pageindex = this.post('pageindex') || 1;\n        const pagesize = this.post('pagesize') || 10;\n\n        const stuno = this.post('stuno');\n        const studentName = this.post('studentname');\n        const tel = this.post('tel');\n        const wxchat = this.post('wxchat');\n\n        let stunocondition = '';\n        let studentnamecondition = '';\n        let telcondition = '';\n        let wxcondition = '';\n\n        if (think.isEmpty(stuno)) {\n            stunocondition = '1=1 ';\n        } else {\n            stunocondition = \"stuNo='\"+stuno+\"'\"\n        }\n\n        if (think.isEmpty(studentName)) {\n            studentnamecondition = '1=1 ';\n        } else {\n            studentnamecondition = \"studentName='\"+studentName+\"'\"\n        }\n\n        if (think.isEmpty(tel)) {\n            telcondition = '1=1 ';\n        } else {\n            telcondition = \"tel='\"+tel+\"'\"\n        }\n\n        if (think.isEmpty(wxchat)) {\n            wxcondition = '1=1 ';\n        } else {\n            wxcondition = \"wxchat='\"+wxchat+\"'\"\n        }\n        \n        const start = (pageindex -1) * pagesize;\n        const model = this.model('student');\n        const data = await model.query(\"select * from culture_student where \" +stunocondition+\" and \"+studentnamecondition+\" and \"+telcondition+\" and \"+wxcondition+\" and studentID limit \"+start+\",\"+pagesize+\" \");\n        return this.success({pageindex:pageindex,pagesize:pagesize,data})\n    }\n    async deleteAction() {\n        const id = this.get('id');\n        const shstate = this.get('shstate');\n        const data = {\n            shstate: shstate\n        }\n        await this.model('student').where({studentID:id}).update(data);\n        return this.success('成功')\n    }\n}"
    ]
}