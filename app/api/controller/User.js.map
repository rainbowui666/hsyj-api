{
    "version": 3,
    "sources": [
        "../../../src/api/controller/user.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "saveAction",
        "userData",
        "userName",
        "post",
        "pwd",
        "usertype",
        "schoolid",
        "shstate",
        "id",
        "get",
        "think",
        "isEmpty",
        "insertid",
        "model",
        "add",
        "where",
        "sysUserID",
        "update",
        "success",
        "getUserListBySchoolidAction",
        "data",
        "select",
        "deleteAction",
        "delete"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;;AAEAC,OAAOC,OAAP,GAAiB,cAAcH,IAAd,CAAmB;AAC1BI,cAAN,GAAmB;AAAA;;AAAA;AACf,kBAAMC,WAAW;AACbC,0BAAU,MAAKC,IAAL,CAAU,UAAV,CADG;AAEbC,qBAAK,MAAKD,IAAL,CAAU,KAAV,CAFQ;AAGbE,0BAAU,MAAKF,IAAL,CAAU,UAAV,KAAyB,CAHtB;AAIbG,0BAAU,MAAKH,IAAL,CAAU,UAAV,KAAyB,EAJtB;AAKbI,yBAAS,MAAKJ,IAAL,CAAU,SAAV,KAAwB;AALpB,aAAjB;;AAQA,gBAAIK,KAAK,MAAKC,GAAL,CAAS,QAAT,CAAT;AACA;;AAEA,gBAAIC,MAAMC,OAAN,CAAcH,EAAd,CAAJ,EAAuB;AACnB;AACI;AACA,oBAAII,WAAW,MAAM,MAAKC,KAAL,CAAW,MAAX,EAAmBC,GAAnB,CAAuBb,QAAvB,CAArB;AACA;AACJ;AACA;AACA;AACA;AACH,aATD,MASO;AACH,sBAAM,MAAKY,KAAL,CAAW,MAAX,EAAmBE,KAAnB,CAAyB,EAACC,WAAWR,EAAZ,EAAzB,EAA0CS,MAA1C,CAAiDhB,QAAjD,CAAN;AACA;AACA;AAEH;;AAED,mBAAO,MAAKiB,OAAL,CAAa,UAAb,CAAP;AA5Be;AA6BlB;;AAEKC,+BAAN,GAAoC;AAAA;;AAAA;AAChC,kBAAMb,WAAW,OAAKG,GAAL,CAAS,UAAT,CAAjB;AACA,kBAAMW,OAAO,MAAM,OAAKP,KAAL,CAAW,MAAX,EAAmBE,KAAnB,CAAyB,EAACT,UAASA,QAAV,EAAzB,EAA8Ce,MAA9C,EAAnB;AACA,mBAAO,OAAKH,OAAL,CAAaE,IAAb,CAAP;AAHgC;AAInC;;AAEKE,gBAAN,GAAqB;AAAA;;AAAA;AACjB,kBAAMd,KAAK,OAAKC,GAAL,CAAS,QAAT,CAAX;AACA,kBAAM,OAAKI,KAAL,CAAW,MAAX,EAAmBE,KAAnB,CAAyB,EAACC,WAAWR,EAAZ,EAAzB,EAA0Ce,MAA1C,EAAN;AACA;AACA,mBAAO,OAAKL,OAAL,CAAa,MAAb,CAAP;AAJiB;AAKpB;AA3C+B,CAApC",
    "file": "../../../src/api/controller/user.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n\nmodule.exports = class extends Base {\n    async saveAction() {\n        const userData = {\n            userName: this.post('userName'),\n            pwd: this.post('pwd'),\n            usertype: this.post('usertype') || 0,\n            schoolid: this.post('schoolid') || '',\n            shstate: this.post('shstate') || 0\n        }\n\n        let id = this.get('userid');\n        // let roleid = this.get('roleid');\n            \n        if (think.isEmpty(id)) {\n            // try {\n                // await think.startTrans();\n                let insertid = await this.model('User').add(userData)\n                // await this.model('user_role').add({sysuserid: insertid, roleid: roleid});\n            //     await this.commit();\n            // } catch (e) {\n            //     await think.rollback();\n            // }\n        } else {\n            await this.model('User').where({sysUserID: id}).update(userData);\n            // await this.model('user_role').where({sysuserid: id}).delete();\n            // await this.model('user_role').add({sysuserid: id, roleid: roleid});\n\n        }\n        \n        return this.success(' success');\n    }\n\n    async getUserListBySchoolidAction() {\n        const schoolid = this.get('schoolid');\n        const data = await this.model('User').where({schoolid:schoolid}).select();\n        return this.success(data)\n    }\n    \n    async deleteAction() {\n        const id = this.get('userid');\n        await this.model('User').where({sysUserID: id}).delete();\n        // await this.model('user_role').where({sysuserid: id}).delete();\n        return this.success('删除成功')\n    }\n}"
    ]
}