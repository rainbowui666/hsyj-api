{
    "version": 3,
    "sources": [
        "../../../src/api/controller/base.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "Controller",
        "__before",
        "getTime",
        "parseInt",
        "Date",
        "now",
        "getLoginUserId",
        "ctx",
        "state",
        "userId"
    ],
    "mappings": ";;AAAAA,OAAOC,OAAP,GAAiB,cAAcC,MAAMC,UAApB,CAA+B;AACxCC,UAAN,GAAiB;AAAA;AAehB;AAdC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACE;AACA;AACA;AACF;;;AAGF;;;;AAIAC,YAAU;AACR,WAAOC,SAASC,KAAKC,GAAL,KAAa,IAAtB,CAAP;AACD;;AAED;;;;AAIAC,mBAAiB;AACf,WAAO,KAAKC,GAAL,CAASC,KAAT,CAAeC,MAAtB;AACD;AAhC6C,CAAhD",
    "file": "../../../src/api/controller/base.js",
    "sourcesContent": [
        "module.exports = class extends think.Controller {\n  async __before() {\n    // 根据token值获取用户id\n    // this.ctx.state.token = this.ctx.header['x-hsyj-token'] || '';\n    // const tokenSerivce = think.service('token', 'api');\n    // this.ctx.state.userId = await tokenSerivce.getUserId(this.ctx.state.token);\n\n    // const publicController = this.config('publicController');\n    // const publicAction = this.config('publicAction');\n    // 如果为非公开，则验证用户是否登录\n    // const controllerAction = this.ctx.controller + '/' + this.ctx.action;\n    // if (!publicController.includes(this.ctx.controller) && !publicAction.includes(controllerAction)) {\n      // if (this.ctx.state.userId <= 0) {\n      //   return this.fail(401, '请先登录');\n      // }\n    // }\n  }\n\n  /**\n   * 获取时间戳\n   * @returns {Number}\n   */\n  getTime() {\n    return parseInt(Date.now() / 1000);\n  }\n\n  /**\n   * 获取当前登录用户的id\n   * @returns {*}\n   */\n  getLoginUserId() {\n    return this.ctx.state.userId;\n  }\n};\n"
    ]
}